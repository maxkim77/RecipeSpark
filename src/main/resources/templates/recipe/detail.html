<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Recipe Detail</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- Header Include -->
    <header th:replace="~{layout/header :: header}"></header>

    <main>
        <div class="container">
            <h1 th:text="${recipe.title}">Recipe Title</h1>
            <p>Created at: 
                <span th:text="${#temporals.format(recipe.createdAt, 'yyyy-MM-dd')}"></span>
            </p>
            <p>Author: <span th:text="${recipe.user.username}"></span></p>
            <p th:text="${recipe.content}">Recipe Content</p>
            <img th:src="@{{imagePath}(imagePath=${recipe.imagePath})}" alt="Recipe Image" class="recipe-image">

            <!-- Scrap Button -->
            <div>
                <form 
                    th:action="${isScrapped} ? @{/recipe/unscrap/{id}(id=${recipe.reviewId})} : @{/recipe/scrap/{id}(id=${recipe.reviewId})}" 
                    method="post" style="display: inline;">
                    <button type="submit" 
                        th:class="${isScrapped} ? 'btn btn-warning' : 'btn btn-success'" 
                        th:text="${isScrapped} ? 'Un-Scrap' : 'Scrap'">
                    </button>
                </form>
            </div>

            <!-- Edit and Delete buttons -->
            <div th:if="${#authentication.name == recipe.user.username}" class="action-buttons mt-3">
                <a th:href="@{/recipe/edit/{reviewId}(reviewId=${recipe.reviewId})}" class="btn btn-primary">Edit</a>
                <form th:action="@{/recipe/delete/{reviewId}(reviewId=${recipe.reviewId})}" method="post" style="display: inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this recipe?')">Delete</button>
                </form>
            </div>

            <!-- Back to List -->
            <div class="mt-3">
                <a th:href="@{/recipe/list}" class="btn btn-secondary">Back to List</a>
            </div>
        </div>
    </main>

    <!-- Footer Include -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
</body>
</html>
